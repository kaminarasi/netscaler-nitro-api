#nstrace

Configuration for nstrace operations resource.


##Properties 
<span>(click to see [Operations](#operations))</span>


<table><thead><tr><th>Name</th><th> Data Type</th><th> Permissions</th><th>Description</th></tr></thead><tbody><tr><td>nf</td><td>&lt;Double></td><td>Read-write</td><td>Number of files to be generated in cycle.&lt;br>Default value: 24&lt;br>Minimum value = 1&lt;br>Maximum value = 100</td><tr><tr><td>time</td><td>&lt;Double></td><td>Read-write</td><td>Time per file (sec).&lt;br>Default value: 3600&lt;br>Minimum value = 1</td><tr><tr><td>size</td><td>&lt;Double></td><td>Read-write</td><td>Size of the captured data. Set 0 for full packet trace.&lt;br>Default value: 164&lt;br>Minimum value = 0&lt;br>Maximum value = 1514</td><tr><tr><td>mode</td><td>&lt;String[]></td><td>Read-write</td><td>Capturing mode for trace. Mode can be any of the following values or combination of these values: RX Received packets before NIC pipelining (Filter does not work when RX capturing mode is ON) NEW_RX Received packets after NIC pipelining TX Transmitted packets TXB Packets buffered for transmission IPV6 Translated IPv6 packets C2C Capture C2C message NS_FR_TX TX/TXB packets are not captured in flow receiver. SSLPLAIN Decrypted SSL packets MPTCP MPTCP master flow Default mode: NEW_RX TXB .&lt;br>Default value: DEFAULT_MODE&lt;br>Possible values = TX, TXB, RX, IPV6, NEW_RX, C2C, NS_FR_TX, APPFW, SSLPLAIN, MPTCP</td><tr><tr><td>pernic</td><td>&lt;String></td><td>Read-write</td><td>Use separate trace files for each interface. Works only with tcpdump format.&lt;br>Default value: DISABLED&lt;br>Possible values = ENABLED, DISABLED</td><tr><tr><td>filename</td><td>&lt;String></td><td>Read-write</td><td>Name of the trace file.</td><tr><tr><td>fileid</td><td>&lt;String></td><td>Read-write</td><td>ID for the trace file name for uniqueness. Should be used only with -name option.</td><tr><tr><td>filter</td><td>&lt;String></td><td>Read-write</td><td>Filter expression for nstrace. Maximum length of filter is 255 and it can be of following format: ;lt;expression;gt; [;lt;relop;gt; ;lt;expression;gt;] ;lt;relop;gt; = ( ;amp;;amp; | || ) nstrace supports two types of filter expressions: Classic Expressions: [Note: Classic Expressions are not supported in non-default partitions] ;lt;expression;gt; = the expression string in the format: ;lt;qualifier;gt; ;lt;operator;gt; ;lt;qualifier-value;gt; ;lt;qualifier;gt; = SOURCEIP. ;lt;qualifier-value;gt; = A valid IP address ;lt;qualifier;gt; = SOURCEPORT. ;lt;qualifier-value;gt; = A valid port number. ;lt;qualifier;gt; = DESTIP. ;lt;qualifier-value;gt; = A valid IP address. ;lt;qualifier;gt; = DESTPORT. ;lt;qualifier-value;gt; = A valid port number. ;lt;qualifier;gt; = IP. ;lt;qualifier-value;gt; = A valid IP address. ;lt;qualifier;gt; = PORT. ;lt;qualifier-value;gt; = A valid port number. ;lt;qualifier;gt; = SVCNAME. ;lt;qualifier-value;gt; = The name of a service. ;lt;qualifier;gt; = VSVRNAME. ;lt;qualifier-value;gt; = The name of a vserver. ;lt;qualifier;gt; = CONNID ;lt;qualifier-value;gt; = A valid PCB dev number. ;lt;qualifier;gt; = VLAN ;lt;qualifier-value;gt; = A valid VLAN ID. ;lt;qualifier;gt; = INTF ;lt;qualifier-value;gt; = A valid interface id in the form of x/y (n/x/y in case of cluster interface). ;lt;operator;gt; = ( == | eq | != | neq | ;gt; | gt | ;lt; | lt | ;gt;= | ge | ;lt;= | le | BETWEEN ) eg: start nstrace -filter "SOURCEIP == 10.102.34.201 || (SVCNAME != s1 ;amp;;amp; SOURCEPORT ;gt; 80)" The filter expression should be given in double quotes. Default Expressions: ;lt;expression;gt; =: CONNECTION.;lt;qualifier;gt;.;lt;qualifier-method;gt;.(;lt;qualifier-value;gt;) ;lt;qualifier;gt; = SRCIP ;lt;qualifier-method;gt; = [ EQ | NE ] ;lt;qualifier-value;gt; = A valid IPv4 address. example = CONNECTION.SRCIP.EQ(127.0.0.1) ;lt;qualifier;gt; = DSTIP ;lt;qualifier-method;gt; = [ EQ | NE ] ;lt;qualifier-value;gt; = A valid IPv4 address. example = CONNECTION.DSTIP.EQ(127.0.0.1) ;lt;qualifier;gt; = IP ;lt;qualifier-method;gt; = [ EQ | NE ] ;lt;qualifier-value;gt; = A valid IPv4 address. example = CONNECTION.IP.EQ(127.0.0.1) ;lt;qualifier;gt; = SRCIPv6 ;lt;qualifier-method;gt; = [ EQ | NE ] ;lt;qualifier-value;gt; = A valid IPv6 address. example = CONNECTION.SRCIPv6.EQ(2001:db8:0:0:1::1) ;lt;qualifier;gt; = DSTIPv6 ;lt;qualifier-method;gt; = [ EQ | NE ] ;lt;qualifier-value;gt; = A valid IPv6 address. example = CONNECTION.DSTIPv6.EQ(2001:db8:0:0:1::1) ;lt;qualifier;gt; = IPv6 ;lt;qualifier-method;gt; = [ EQ | NE ] ;lt;qualifier-value;gt; = A valid IPv6 address. example = CONNECTION.IPv6.EQ(2001:db8:0:0:1::1) ;lt;qualifier;gt; = SRCPORT ;lt;qualifier-method;gt; = [ EQ | NE | GT | GE | LT | LE | BETWEEN ] ;lt;qualifier-value;gt; = A valid port number. example = CONNECTION.SRCPORT.EQ(80) ;lt;qualifier;gt; = DSTPORT ;lt;qualifier-method;gt; = [ EQ | NE | GT | GE | LT | LE | BETWEEN ] ;lt;qualifier-value;gt; = A valid port number. example = CONNECTION.DSTPORT.EQ(80) ;lt;qualifier;gt; = PORT ;lt;qualifier-method;gt; = [ EQ | NE | GT | GE | LT | LE | BETWEEN ] ;lt;qualifier-value;gt; = A valid port number. example = CONNECTION.PORT.EQ(80) ;lt;qualifier;gt; = VLANID ;lt;qualifier-method;gt; = [ EQ | NE | GT | GE | LT | LE | BETWEEN ] ;lt;qualifier-value;gt; = A valid VLAN ID. example = CONNECTION.VLANID.EQ(0) ;lt;qualifier;gt; = CONNID ;lt;qualifier-method;gt; = [ EQ | NE | GT | GE | LT | LE | BETWEEN ] ;lt;qualifier-value;gt; = A valid PCB dev number. example = CONNECTION.CONNID.EQ(0) ;lt;qualifier;gt; = PPEID ;lt;qualifier-method;gt; = [ EQ | NE | GT | GE | LT | LE | BETWEEN ] ;lt;qualifier-value;gt; = A valid core ID. example = CONNECTION.PPEID.EQ(0) ;lt;qualifier;gt; = SVCNAME ;lt;qualifier-method;gt; = [ EQ | NE | CONTAINS | STARTSWITH | ENDSWITH ] ;lt;qualifier-value;gt; = A valid text string. example = CONNECTION.SVCNAME.EQ("name") ;lt;qualifier;gt; = LB_VSERVER.NAME ;lt;qualifier-method;gt; = [ EQ | NE | CONTAINS | STARTSWITH | ENDSWITH ] ;lt;qualifier-value;gt; = LB vserver name. example = CONNECTION.LB_VSERVER.NAME.EQ("name") ;lt;qualifier;gt; = CS_VSERVER.NAME ;lt;qualifier-method;gt; = [ EQ | NE | CONTAINS | STARTSWITH | ENDSWITH ] ;lt;qualifier-value;gt; = CS vserver name. example = CONNECTION.CS_VSERVER.NAME.EQ("name") ;lt;qualifier;gt; = INTF ;lt;qualifier-method;gt; = [ EQ | NE ] ;lt;qualifier-value;gt; = A valid interface id in the form of x/y. example = CONNECTION.INTF.EQ("x/y") ;lt;qualifier;gt; = SERVICE_TYPE ;lt;qualifier-method;gt; = [ EQ | NE ] ;lt;qualifier-value;gt; = ( SVC_HTTP | FTP | TCP | UDP | SSL | SSL_BRIDGE | SSL_TCP | NNTP | RPCSVR | RPCSVRS | RPCCLNT | SVC_DNS | ADNS | SNMP | RTSP | DHCPRA | ANY| MONITOR | MONITOR_UDP | MONITOR_PING | SIP_UDP | SVC_MYSQL | SVC_MSSQL | SERVICE_UNKNOWN ) example = CONNECTION.SERVICE_TYPE.EQ(ANY) ;lt;qualifier;gt; = TRAFFIC_DOMAIN_ID ;lt;qualifier-method;gt; = [ EQ | NE | GT | GE | LT | LE | BETWEEN ] ;lt;qualifier-value;gt; = A valid traffic domain ID. example = CONNECTION.TRAFFIC_DOMAIN_ID.EQ(0) eg: start nstrace -filter "CONNECTION.SRCIP.EQ(127.0.0.1) || (CONNECTION.SVCNAME.NE("s1") ;amp;;amp; CONNECTION.SRCPORT.EQ(80))" The filter expression should be given in double quotes. common use cases: Trace capturing full sized traffic from/to ip 10.102.44.111, excluding loopback traffic start nstrace -size 0 -filter "CONNECTION.IP.NE(127.0.0.1) ;amp;;amp; CONNECTION.IP.EQ(10.102.44.111)" Trace capturing all traffic to (terminating at) port 80 or 443 start nstrace -size 0 -filter "CONNECTION.DSTPORT.EQ(443) || CONNECTION.DSTPORT.EQ(80)" Trace capturing all backend traffic specific to service service1 along with corresponding client side traffic start nstrace -size 0 -filter "CONNECTION.SVCNAME.EQ("service1")" -link ENABLED Trace capturing all traffic through NS interface 1/1 start nstrace -filter "CONNECTION.INTF.EQ("1/1")" Trace capturing all traffic specific through vlan 2 start nstrace -filter "CONNECTION.VLANID.EQ(2)" Trace capturing all frontend (client side) traffic specific to lb vserver vserver1 along with corresponding server side traffic start nstrace -size 0 -filter "CONNECTION.LB_VSERVER.NAME.EQ("vserver1")" -link ENABLED .</td><tr><tr><td>link</td><td>&lt;String></td><td>Read-write</td><td>Includes filtered connections peer traffic.&lt;br>Default value: DISABLED&lt;br>Possible values = ENABLED, DISABLED</td><tr><tr><td>nodes</td><td>&lt;Double[]></td><td>Read-write</td><td>Nodes on which tracing is started. &lt;br>Minimum value = 0&lt;br>Maximum value = 32</td><tr><tr><td>filesize</td><td>&lt;Double></td><td>Read-write</td><td>File size, in MB, treshold for rollover. &lt;br>Default value: 0&lt;br>Minimum value = 0&lt;br>Maximum value = 65536</td><tr><tr><td>traceformat</td><td>&lt;String></td><td>Read-write</td><td>Format in which trace will be generated .&lt;br>Default value: 0&lt;br>Possible values = NSCAP, PCAP</td><tr><tr><td>merge</td><td>&lt;String></td><td>Read-write</td><td>Specify how traces across PEs are merged .&lt;br>Default value: 0&lt;br>Possible values = ONSTOP, ONTHEFLY, NOMERGE</td><tr><tr><td>doruntimecleanup</td><td>&lt;String></td><td>Read-write</td><td>Enable or disable runtime temp file cleanup.&lt;br>Default value: ENABLED&lt;br>Possible values = ENABLED, DISABLED</td><tr><tr><td>tracebuffers</td><td>&lt;Double></td><td>Read-write</td><td>Number of 16KB trace buffers.&lt;br>Default value: 5000&lt;br>Minimum value = 1000</td><tr><tr><td>skiprpc</td><td>&lt;String></td><td>Read-write</td><td>skip RPC packets.&lt;br>Default value: DISABLED&lt;br>Possible values = ENABLED, DISABLED</td><tr><tr><td>inmemorytrace</td><td>&lt;String></td><td>Read-write</td><td>Logs packets in appliances memory and dumps the trace file on stopping the nstrace operation.&lt;br>Default value: DISABLED&lt;br>Possible values = ENABLED, DISABLED</td><tr><tr><td>state</td><td>&lt;String></td><td>Read-only</td><td>Current running state of trace.&lt;br>Default value: 0&lt;br>Possible values = RUNNING, STOPPED</td><tr><tr><td>scope</td><td>&lt;String></td><td>Read-only</td><td>Scope of started trace, local or cluster level.&lt;br>Default value: 0&lt;br>Possible values = CLUSTER, LOCAL</td><tr><tr><td>tracelocation</td><td>&lt;String></td><td>Read-only</td><td>Directory where current trace files are saved.</td><tr></tbody></table>
##Operations 
<span>(click to see [Properties](#properties))</span>


[GET (ALL)](#get-(all))


Some options that you can use for each operations:
<ul><li><p><b>Getting warnings in response:</b> NITRO allows you to get warnings in an operation by specifying the "warning" query parameter as "yes". For example, to get warnings while connecting to the NetScaler appliance, the URL is as follows:</p><p>http://<span style="color:green;font-style:italic;">&lt;netscaler-ip-address&gt;</span>/nitro/v1/config/login?warning=yes</p><p>If any, the warnings are displayed in the response payload with the HTTP code "209 X-NITRO-WARNING".</p></li><li><p><b>Authenticated access for individual NITRO operations:</b> NITRO allows you to logon to the NetScaler appliance to perform individual operations. You can use this option instead of creating a NITRO session (using the login object) and then using that session to perform all operations,</p><p>To do this, you must specify the username and password in the request header of the NITRO request as follows:</p><p>X-NITRO-USER:<span style="color:green;font-style:italic;">&lt;username&gt;</span></p><p>X-NITRO-PASS:<span style="color:green;font-style:italic;">&lt;password&gt;</span></p><p><b>Note:</b> In such cases, make sure that the request header DOES not include the following:</p><p>Cookie:NITRO_AUTH_TOKEN=<span style="color:green;font-style:italic;">&lt;tokenvalue&gt;</span></p></li></ul>



***Note:*** 
Mandatory parameters are marked in <span style="color:#FF0000;">red</span> and placeholder content is marked in <span style="color:green;font-style:italic">&lt;green&gt;</span>.

###get (all)



URL: http://&lt;NSIP&gt;/nitro/v1/config/nstrace
HTTP Method: GET
Response Payload: ```{ "errorcode": 0, "message": "Done", "severity": <String_value>, "nstrace": [ {      "state":<String_value>,      "scope":<String_value>,      "tracelocation":<String_value>,      "nf":<Double_value>,      "time":<Double_value>,      "size":<Double_value>,      "mode":<String[]_value>,      "traceformat":<String_value>,      "pernic":<String_value>,      "filename":<String_value>,      "fileid":<String_value>,      "filter":<String_value>,      "link":<String_value>,      "nodes":<Double[]_value>,      "merge":<String_value>,      "doruntimecleanup":<String_value>,      "tracebuffers":<Double_value>,      "skiprpc":<String_value>,      "inmemorytrace":<String_value>}]}```



